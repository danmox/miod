<launch>

  <!-- line demo args -->
  <arg name="collision_distance"     default="2.0"/>  <!-- m -->
  <arg name="minimum_update_rate"    default="2"/>    <!-- Hz -->
  <arg name="task_agent_velocity"    default="0.7"/>  <!-- m/s -->
  <arg name="print_routes"           default="false"/>
  <arg name="param_file"             default="/cfg/2t1n_line.yaml"/>

  <!-- machine config -->
  <arg name="remote"             default="false" />
  <arg name="machine_name"       if="$(arg remote)"  default="nuc4" />
  <arg name="machine_name"       unless="$(arg remote)" default=""/>
  <arg name="machine_ip"         default="10.42.0.4" />
  <arg name="machine_log"        value="$(arg machine_name)" />
  <arg name="machine_env"        value="~/source_env.sh" />


  <!-- line demo params -->
  <rosparam command="load" file="$(find intel_aero_experiments)$(arg param_file)"/>

  <group if="$(arg remote)" >
         <machine
             name="$(arg machine_name)"
             address="$(arg machine_ip)"
             env-loader="$(arg machine_env)"
             timeout="10"
             user="$(arg machine_log)"/>
  </group>

  <!-- network topology visualization -->
  <node
        machine = "$(arg machine_name)"
        pkg="network_status"
        type="routing_visualization_node"
        name="routing_visualization_node"
        output="screen">
    <param name="world_frame"       value="world"/>
    <param name="pose_topic_prefix" value="/"/>
    <param name="pose_topic_suffix" value="/pose"/>
  </node>

  <!-- network planner nodes -->

  <node
        machine = "$(arg machine_name)"
        pkg="intel_aero_demos"
        type="network_planner_node"
        name="connectivity_network_planner"
        output="screen">
    <param name="max_velocity"        value="$(arg task_agent_velocity)"/>
    <param name="collision_distance"  value="$(arg collision_distance)"/>
    <param name="minimum_update_rate" value="$(arg minimum_update_rate)"/>
    <param name="pose_topic"          value="/nuc#/pose"/>
    <param name="nav_nodelet"         value="/nuc#/px4_waypoint_navigation_nodelet"/>
    <param name="world_frame"         value="world"/>
    <param name="planner_type"        value="moving"/>
    <param name="print_routes"        value="$(arg print_routes)"/>
  </node>

</launch>
